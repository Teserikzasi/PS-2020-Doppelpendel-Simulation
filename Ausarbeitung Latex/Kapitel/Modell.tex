\chapter{Modellierung}\label{cha:modell}

In diesem Kapitel wird die Modellierung des Gesamtsystems erläutert und auf dessen Implementierung in \Simulink\ eingegangen.

\input{./Kapitel/Modell_SP.tex}
\input{./Kapitel/Modell_Mot.tex}


\section{Modellparameter}\label{sec:mparams}

Bevor in den Abschnitten \ref{subsec:motorparams} und \ref{subsec:spdparams} die in dieser Arbeit verwendeten Parametersätze für Motor- und Schlittendoppelpendel-Modell vorgestellt werden, soll im folgenden Abschnitt zunächst ein Überblick über die Entwicklung der in den vergangenen Arbeiten verwendeten Modellparameter gegeben werden.  

\subsection{Begründeter Stand der Modellparameter}\label{subsec:paramshist}

Die für die Modellierung erforderlichen Systemparameter des Versuchsstands wurden erstmalig 1997 von Franke \cite{franke} durch Messungen identifiziert. Die Antriebseinheit aus Spannungs-Strom-Wandler, Motor, Getriebe und Riemen ist seitdem nicht verändert worden. Daher repräsentieren die von Franke \cite{franke} identifizierten Modellparameter in Bezug auf die Antriebseinheit weiterhin den aktuellen Stand (siehe Abschnitt \ref{subsec:motorparams})
   
Während zuvor noch ein Einfachpendel verwendet worden war, konstruierte Apprich \cite{apprich} 2009 erstmalig ein Doppelpendel für den Versuchsstand. Von den Änderungen betroffen war neben den Pendeln auch die Schlittenmasse, da auch der obere Teil des Schlittens neu konstruiert wurde. Die Modellparameter für die neuen Pendelstäbe wurden, anders als bei Franke \cite{franke}, nicht gemessen, sondern aus dem CAD-Modell abgeleitet. Dies betrifft die Massen, Trägheitsmomente, Längen und Schwerpunkte der beiden Stäbe. Die Masse des Schlittens wurde von Franke \cite{franke} übernommen. Durch Messungen wurden lediglich die viskose und trockene Reibung des Schlittens gegenüber den Schienen erneut identifiziert. Im selben Jahr wurde von Kämmerer \cite{kämmerer} die viskose Lagerreibung $d_1$ zwischen Stab 1 und dem Schlitten als fehlender Modellparameter durch Messungen ergänzt. Die viskose Lagerreibung $d_2$ zwischen Stab 1 und Stab 2 wurde rechnerisch bestimmt, da das Lager gegen Ende der Arbeit getauscht werden musste. Die viskose Dämpfung des Schlittens, die von Apprich \cite{apprich} zuvor gemessen worden war, wurde durch einen deutlich höheren Schätzwert ersetzt. Außerdem wurde erstmalig die Masse von Schlitten und Antrieb zu einer schlittenseitig wirkenden Gesamtmasse zusammengefasst und ebenfalls als Schätzwert ausgewiesen.

Die Reibwerte $d_1$ und $d_2$ wurden 2011 durch Kisner \cite{kisner} erneut bestimmt. Durch die \textit{Prediction-Error Minimization Method} aus der \textit{System Identification Toolbox} von \Matlab\ wurden die Parameter $d_1$ und $d_2$ so variiert, dass die quadratische Fehlersumme minimal wird. Der Fehler wird durch die Differenz zwischen den gemessenen und den vom Modell vorhergesagten zeitlichen Winkelverläufen $\varphi_1(t)$ und $\varphi_2(t)$ bei ruhendem Schlitten und frei gewählter Anfangsauslenkung beschrieben. Für die Optimierung wurden zudem Anfangsschätzwerte für $d_1$ und $d_2$ gewählt, die nicht näher begründet wurden. Es wird davon ausgegangen, dass es sich um Erfahrungswerte handelt, da sie einerseits nicht mit den zuletzt von Kämmerer \cite{kämmerer} bestimmten Werten übereinstimmen, jedoch andererseits zu guten Ergebnissen am Versuchsstand führten. Statt der optimierten Werte wurden in den Nachfolgearbeiten die Anfangsschätzwerte weiterverwendet. Der Reibwert $d_0$ der viskosen Schlittenreibung, der nicht Gegenstand der Optimierung war, wurde mit einem deutlich höheren Wert als bei Kämmerer \cite{kämmerer} angegeben. Er ist auf Grund der ausbleibenden Erläuterung vermutlich als Erfahrungswert zu verstehen. Die zuvor von Kämmerer \cite{kämmerer} geschätzte effektive Gesamtmasse von Schlitten und Antrieb wurde nach unten korrigiert, wobei keine explizite Begründung vorliegt. Der neue Wert ist jedoch plausibel und wird daher ebenfalls als erfahrungsbasierter Schätzwert verstanden. Er ist in den weiteren Arbeiten nicht mehr verändert worden, sodass er als aktueller Stand zu betrachten ist. Bei Kisner \cite{kisner} wurde erstmalig auch eine Begrenzung der Stellkraft von $F_{\mrm{max}}=400 N$ bezüglich des Schlittens angegeben, jedoch nicht näher begründet. 2011 wurde außerdem von Noupa \cite{noupa} sowohl die viskose als auch die trockene Schlittenreibung gemessen, wobei besonders für die viskose Reibung eine hohe Richtungsabhängigkeit beobachtet wurde. Die gemessenen Werte wurden in den weiteren Arbeiten jedoch nicht weiter beachtet.

Auf Grund eines Austauschs des Lagers von Stab 2 wurde 2014 von Brehl \cite{brehl} eine erneute Identifikation der viskosen Dämpfungskonstanten $d_2$ messungsbasiert durchgeführt. Dabei wurden auch Länge und Masse von Stab 2 gemessen, womit auch das Massenträgheitsmoment neu berechnet wurde. In den Nachfolgearbeiten wurde jedoch nur die Dämpfungskonstante weiterverwendet, während für Länge, Masse und Trägheitsmoment weiterhin die CAD-Werte von Apprich \cite{apprich} verwendet wurden.  

Chang \cite{chang} konstruierte im Sommersemester 2019 ein neues Doppelpendel, wobei Schlitten und Antrieb nicht verändert worden sind. Die neuen Modellparameter wurden wieder aus dem CAD-Modell abgeleitet. Die Angabe des Schwerpunkts $s_2$ von Stab 2 scheint in der Ausarbeitung jedoch zu fehlen. Die Dämpfungskonstanten $d_1$ und $d_2$ wurden von den Vorgängern übernommen, da bei der Konstruktion die gleichen Rillenkugellager gewählt wurden wie bei Apprich \cite{apprich}. Für $d_1$ wurde der Schätzwert von Kisner \cite{kisner} und für $d_2$ der Messwert von Brehl \cite{brehl} übernommen, wobei in Changs Ausarbeitung versehentlich für beide Parameter Apprich \cite{apprich} als Quelle zitiert wird. Die viskose und die trockene Reibung des Schlittens wurden durch Messung selbst bestimmt. Wie bei Noupa \cite{noupa} wurde bei der viskosen Reibung eine auffällige Richtungsabhängigkeit festgestellt. Die Berücksichtigung der Richtungsabhängigkeit mit einer Vorsteuerung führte jedoch zu einer Verschlechterung des Systemverhaltens. Daher wurde schließlich die linksseitige Dämpfungskonstante für beide Seiten übernommen. Da das neu konstruierte Pendel noch nicht für die weiteren Bestandteile der Arbeit, wie die Auslegung der Regelung und deren Erprobung am Versuchsstand, zur Verfügung stand, wurde weiterhin auf die CAD-Werte von Apprich \cite{apprich} zurückgegriffen. Der Betrag der maximalen Stellkraft $F_{\mrm{max}}$ wurde zudem von dem von Kisner \cite{kisner} zuletzt genannten Wert von $400 N$ auf $421 N$ erhöht. Der neue Wert lässt sich rechnerisch nachvollziehen, wie Abschnitt \ref{subsec:motorparams} entnommen werden kann.

Im Rahmen einer Verifikation der von Chang \cite{chang} angegebenen Modellparameter für das neue Doppelpendel, wurden im Wintersemester 2019/2020 durch Ribeiro \cite{ribeiro} die Parameter aus dem CAD-Modell erneut abgeleitet. Da hierbei nicht genauer auf den Anlass der Neubestimmung eingegangen wurde, sich die neu bestimmten Parameter jedoch deutlich von den Vorherigen unterscheiden, wird angenommen, dass sich die von Chang \cite{chang} angegebenen Werte im Rahmen der Verifikation als fehlerbehaftet herausstellt hatten. 
Darüber hinaus wurde durch Messung die Reibung der Pendelgelenke identifiziert. Hierbei wurde neben der viskosen Reibung erstmalig auch die trockene Reibung in den Gelenken ermittelt. Die Parameter von Ribeiro \cite{ribeiro} zu den Pendelstäben sind somit aktueller Stand. Dagegen übernommen wurde weiterhin die von Kisner \cite{kisner} geschätzte Gesamtmasse mit Schlitten und Antrieb. Für die maximale Stellkraft wurde im Gegensatz zur Vorgängerarbeit Chang \cite{chang} statt $421 N$ wieder $400 N$ angenommen. Es wird vermutet, dass dadurch eine Stellkraftreserve für die Regelung vorgehalten werden sollte.

\subsection{Parameter des Motor-Modells}\label{subsec:motorparams}

Gemäß Abschnitt \ref{subsec:paramshist} werden die Modellparameter für das Motormodell franke \cite{franke} entnommen. 

Die Steuerspannung $U_{\mrm{Steuer}}$ am Eingang des Spannungs-Strom-Wandlers darf maximal $\pm10 V$ betragen. Ein Betrag größer als $10 V$ sollte vermieden werden, da sonst der Impulsstrom über den zulässigen Wert ansteigen und der Stromregler zerstört werden kann.

Die Verstärkung $K_{UI}$ des Spannungs-Strom-Wandlers kann durch ein Potentiometer bis zu einem Wert von etwa $2 \ A/V$ eingestellt werden, sodass über die maximale Steuerspannung der maximal zulässige Impulsstrom von $20A$ erreicht wird. Die zuletzt dokumentierte Einstellung liegt bei
\[
	K_{UI} = 1,87 \ \frac{A}{V} \ .
\]
Der Wert beinhaltet bereits eine Idealisierung, da Messungen von franke \cite{franke} gezeigt haben, dass die reale Verstärkung am Versuchsstand eine leichte Richtungsabhängigkeit bezüglich des Vorzeichens aufweist.

Alle weiteren verwendeten Parameter des Motormodells sind in Tabelle \ref{tab:motorparams} aufgeführt.

\begin{table}[h]
	\centering
		\begin{tabular}[t]{cc} \
					Tabelle & Dummy \\
		\end{tabular}
	\caption{Parameter - Motormodell}
	\label{tab:motorparams}
\end{table}

Die Zeitkonstante $T_{UI}$ wird als ausreichend klein angesehen, dass die Dynamik des Wandlers vernachlässigt werden kann.
Damit lässt sich mit
\[
	K_{\mrm{staticgain}} = K_{UI} \cdot K_I \cdot \frac{1}{K_G} \cdot \frac{1}{r_{32}}
\]
 die maximale Stellkraft
\[
	F_{\mrm{max}} = U_{\mrm{Steuer, max}} \cdot K_{\mrm{staticgain}} = 420,75 N
\]
berechnen. 

\subsection{Parameter des Schlittendoppelpendels}\label{subsec:spdparams}



Apprich \cite{apprich}

Chang \cite{chang}

Brehl \cite{brehl}

Ribeiro \cite{ribeiro}


\section{Aufbau in \Simulink}



\section{Implementierung in \Matlab}